## **1. 프로젝트 목표**

Flutter 기반의 모바일 앱을 통해 실시간으로 PCB 불량을 탐지하고, 탐지된 결과에 대해 **AI 어드바이저가 대화형으로 해결책을 제시**하며, 전체 검사 내용을 **클릭 한 번으로 자동 문서화**하는 통합 진단 솔루션을 구축한다.

## **2. 핵심 아키텍처 및 작업 흐름**

1. **(탐지)** 사용자가 스마트폰 카메라로 PCB를 비춘다.
2. **(분석)** 앱에 내장된 **best_float16.tflite`** 모델이 실시간으로 **`Dry_joint`**, **`PCB_damage`** 등 4가지 불량을 탐지하고 화면에 위치를 표시한다.
3. **(저장)** 사진촬영시 표시한 화면의 결함을 설명해주고 사진과 함께께 데이터 베이스에 저장한다.
3. **(상호작용)** 사용자가 화면에 표시된 불량(예: 'Dry_joint')에 대한 'AI 문의' 버튼을 누른다.
4. **(질의)** 앱은 **"PCB에서 'Dry_joint' 불량이 발견되었습니다. 이 문제의 원인과 해결 방법을 단계별로 알려주세요."** 와 같은 구체적인 프롬프트를 자동으로 구성하여 외부 LLM(대규모 언어 모델) API로 전송한다.
5. **(답변)** LLM이 생성한 전문적인 답변(원인, 해결책, 주의사항 등)을 받아와 앱 내의 채팅 인터페이스에 표시한다.
6. **(문서화)** 사용자가 '리포트 생성' 버튼을 누르면, 해당 세션에서 탐지된 모든 불량 정보(종류, 위치, 캡처 이미지, 시간 등)를 종합하여 PDF 형식의 깔끔한 진단 보고서를 자동으로 생성하고 저장/공유할 수 있게 한다.

## 모델

## **1. 핵심 모델 (반드시 필요)**

- **모델:** **`yolov11n-pcb-defect-segmentation`**
- **역할:** 이 모델이 실제로 PCB 이미지를 분석하여 4가지 주요 불량(**`Dry_joint`**, **`Incorrect_installation`**, **`PCB_damage`**, **`Short_circuit`**)의 위치와 형태를 찾아내는 모든 작업을 수행합니다.
- **준비:** 우리가 이전 단계에서 PyTorch(.pt) 원본을 변환하여 준비한 버전의 **`best_float16.tflite`** 파일을 사용합니다.

## **2. 추가 모델 **

- **OCR(광학 문자 인식) 모델: google ML kit text recognition**
    - **역할:** PCB 기판 위의 부품 번호, 모델명, 시리얼 번호 등 텍스트를 읽는 역할을 합니다.
    - **예시:** 경량화된 **`EasyOCR`** 또는 **`Tesseract`** 모델을 **`.tflite`**로 변환하여 사용할 수 있습니다.
    - **기대 효과:** "A7 칩 주변에서 Dry_joint 의심" 과 같이, 특정 부품과 연계하여 더 상세한 진단 정보를 제공할 수 있습니다.

## **3. AI 어드바이저 (진단 챗봇)**

- **역할:** "그래서 어떻게 해야 해?" 라는 사용자의 질문에 답하는 전문가의 역할을 수행합니다. 단순한 웹 검색 결과를 보여주는 것을 넘어, 현재 탐지된 불량의 맥락을 이해하고 맞춤형 답변을 제공합니다.
- **필요 기술/모델:**
    - **LLM (대규모 언어 모델):** Gemini-2.5-flash-lite
    - **Flutter 패키지:**
        - **`http`**: OpenAI API와 통신하기 위한 필수 패키지.
        - **`flutter_chat_ui`** (또는 유사 패키지): 세련된 채팅 UI를 쉽게 구현하기 위한 패키지.

## **4. 원클릭 진단 리포트 자동 생성**

- **역할:** 수동으로 결과를 기록하고 보고서를 작성하는 번거로운 작업을 완전히 자동화합니다. 클릭 한 번으로 체계적이고 전문적인 진단 결과 문서를 생성하여, 작업 이력을 관리하고 팀원과 공유하는 것을 돕습니다.
- **필요 기술/모델:**
    - **자연어 생성 (NLG):** 탐지된 여러 불량 정보를 바탕으로 "총 3건의 불량이 발견되었으며, 이 중 2건은 Dry_joint, 1건은 PCB_damage 입니다." 와 같은 요약 문장을 생성하는 데 LLM을 활용할 수 있습니다. (간단한 템플릿 기반으로 구현할 수도 있습니다.)
    - **Flutter 패키지:**
        - **`pdf`**: Flutter 코드만으로 PDF 문서를 생성하고 서식을 지정할 수 있는 핵심 패키지.
        - **`printing`**: 생성된 PDF를 공유하거나 인쇄할 수 있도록 도와주는 패키지.
        - **`path_provider`**: 생성된 PDF 파일을 사용자의 기기에 안전하게 저장할 경로를 얻기 위한 패키지.
- **리포트 포함 내용:**
    - 검사 일시
    - 검사 대상 PCB 정보 (모델명 등)
    - **결과 요약:** 총 발견된 불량 개수 및 종류별 통계
    - **세부 내역:** 각 불량별 캡처 이미지, 불량 종류, 신뢰도 점수, 위치 좌표
    - **종합 의견 (AI 생성):** AI가 생성한 전반적인 상태 및 권장 조치 사항